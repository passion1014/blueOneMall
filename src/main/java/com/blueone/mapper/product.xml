<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="product">
	<resultMap id="ProductBaseDtlMap" type="productInfo">
		<!-- <id property="idx" column="IDX" javaType="int"/> -->
		<result property="idx" column="IDX" javaType="int"/>
		<result property="prdCd" column="PRD_CD" javaType="java.lang.String"/>
		<result property="prdDp" column="PRD_DISPLAY_YN" javaType="java.lang.String"/>
		<result property="prdOrd" column="PRD_ORDER" javaType="int"/>
		<result property="prdNm" column="PRD_NM" javaType="java.lang.String"/>
		<result property="prdCtgL" column="PRD_CTG_L" javaType="java.lang.String"/>
		<result property="prdCtgM" column="PRD_CTG_M" javaType="java.lang.String"/>
		<result property="prdCtgS" column="PRD_CTG_S" javaType="java.lang.String"/>
		<result property="prdSpe1" column="PRO_SPECAL_1" javaType="java.lang.String"/>
		<result property="prdSpe2" column="PRO_SPECAL_2" javaType="java.lang.String"/>
		<result property="schWord" column="SEARCH_WORD" javaType="java.lang.String"/>
		<result property="fromDate" column="FROM_DATE" javaType="java.lang.String"/>
		<result property="toDate" column="TO_DATE" javaType="java.lang.String"/>
		<result property="regDate" column="REG_DATE" javaType="java.lang.String"/>
		<result property="lastDate" column="LAST_DATE" javaType="java.lang.String"/>
		<result property="modifyUserId" column="MODIFY_USER_ID" javaType="java.lang.String"/>
		
		<result property="proCd" column="PRO_CD" javaType="java.lang.String"/>
		<result property="proPrice" column="PRO_PRICE" javaType="int"/>
		<result property="proSellPrc" column="PRO_SELL_PRICE" javaType="int"/>
		<result property="proModel" column="PRO_MODEL" javaType="java.lang.String"/>
		<result property="proModelNo" column="PRO_MODEL_NO" javaType="java.lang.String"/>
		<result property="proBrand" column="PRO_BRAND" javaType="java.lang.String"/>
		<result property="proListCmt" column="PRO_LIST_CMT" javaType="java.lang.String"/>
		<result property="proListImg" column="PRO_LIST_IMG" javaType="java.lang.String"/>
		<result property="proImg1" column="PRO_IMG_1" javaType="java.lang.String"/>
		<result property="proImg2" column="PRO_IMG_2" javaType="java.lang.String"/>
		<result property="proImg3" column="PRO_IMG_3" javaType="java.lang.String"/>
		<result property="proImg4" column="PRO_IMG_4" javaType="java.lang.String"/>
		<result property="proConts" column="PRO_CONTENTS" javaType="java.lang.String"/>
		<result property="proTransInf" column="PRO_TRANSFOR_INF" javaType="int"/>
		<result property="admMeno" column="ADMIN_MEMO" javaType="java.lang.String"/>
	</resultMap>
	

	<select id="selectListBomProductTb0001" parameterType="searchProdInfo" resultMap="ProductBaseDtlMap">
		SELECT  
			T1.IDX,
			T1.PRD_CD, 
			T1.PRD_DISPLAY_YN, 
			T1.PRD_ORDER,
			T1.PRD_NM ,
			T1.PRD_CTG_L, 
			T1.PRD_CTG_M ,
			T1.PRD_CTG_S ,
			T1.PRO_SPECAL_1, 
			T1.PRO_SPECAL_2 ,
			T1.SEARCH_WORD ,
			T1.FROM_DATE ,
			T1.TO_DATE ,
			T1.REG_DATE ,
			T1.LAST_DATE ,
			T1.MODIFY_USER_ID, 
			
			T2.PRO_CD ,
			T2.PRO_PRICE, 
			T2.PRO_SELL_PRICE, 
			T2.PRO_MODEL ,
			T2.PRO_MODEL_NO, 
			T2.PRO_BRAND ,
			T2.PRO_LIST_CMT, 
			T2.PRO_LIST_IMG ,
			T2.PRO_IMG_1 ,
			T2.PRO_IMG_2 ,
			T2.PRO_IMG_3 ,
			T2.PRO_IMG_4 ,
			T2.PRO_CONTENTS, 
			T2.PRO_TRANSFOR_INF, 
			T2.ADMIN_MEMO 
		FROM BOM_PRODUCT_TB AS T1
			LEFT JOIN BOM_PRODUCT_DETAIL_TB T2
				ON ( T1.PRD_CD = T2.PRO_CD)
		WHERE
			1 = 1
			<if test="prodNm != null and prodNm != ''">AND T1.PRD_NM LIKE CONCAT(#{prodNm},'%')</if>
			<if test="prdCtgL != null and prdCtgL != ''">AND T1.PRD_CTG_L LIKE CONCAT(#{prdCtgL},'%')</if>
			<if test="prdCtgM != null and prdCtgM != ''">AND T1.PRD_CTG_M LIKE CONCAT(#{prdCtgM},'%')</if>
			<if test="prdCtgS != null and prdCtgS != ''">AND T1.PRD_CTG_S LIKE CONCAT(#{prdCtgS},'%')</if>
	</select >
	
	<insert id="insertBomProductTb0001" parameterType="productInfo">
		INSERT  BOM_PRODUCT_TB
			(`PRD_CD`,`PRD_DISPLAY_YN`,`PRD_ORDER`,`PRD_NM`,
			`PRD_CTG_L`,`PRD_CTG_M`,`PRD_CTG_S`,`PRO_SPECAL_1`,`PRO_SPECAL_2`,`SEARCH_WORD`,
			`FROM_DATE`,`TO_DATE`,`REG_DATE`,`LAST_DATE`,`MODIFY_USER_ID`)
			VALUES
			(#{prdCd},#{prdDp},#{prdOrd}, #{prdNm}, #{prdCtgL}, #{prdCtgM}
				, #{prdCtgS}, #{prdSpe1},#{prdSpe1},#{schWord},
				#{fromDate}, #{toDate}, sysdate(), sysdate(), 'default')
	</insert>

	<insert id="insertBomProductDtlTb0001" parameterType="productInfo">
		INSERT  BOM_PRODUCT_DETAIL_TB
			(`PRO_CD`,`PRO_PRICE`,`PRO_SELL_PRICE`,`PRO_MODEL`
				,`PRO_MODEL_NO`,`PRO_BRAND`,`PRO_LIST_CMT`,`PRO_LIST_IMG`
				,`PRO_IMG_1`,`PRO_IMG_2`,`PRO_IMG_3`,`PRO_IMG_4`
				,`PRO_CONTENTS`,`PRO_TRANSFOR_INF`,`ADMIN_MEMO`)
			VALUES
			(#{prdCd}, #{proPrice}, #{proSellPrc}, #{proModel}, #{proModelNo},
			#{proBrand}, #{proListCmt}, #{proListImg}, #{proImg1},
			#{proImg2},#{proImg3},#{proImg4}
				, #{proConts}, #{proTransInf}, #{admMeno})
	</insert>

</mapper>
