<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="category">
	<resultMap id="CategoryInfoMap" type="com.blueone.category.domain.CategoryInfo">
		<id property="idx" column="IDX" javaType="int"/>
		<result property="ctgPCode" column="CTG_P_CODE" javaType="java.lang.String"/>
		<result property="ctgCodeType" column="CTG_CODE_TYPE" javaType="java.lang.String"/>
		<result property="ctgCode" column="CTG_CODE" javaType="java.lang.String"/>
		<result property="ctgName" column="CTG_NAME" javaType="java.lang.String"/>
		<result property="ctgDesc" column="CTG_DESC" javaType="java.lang.String"/>
		<result property="fromDate" column="FROM_DATE" javaType="java.lang.String"/>
		<result property="toDate" column="TO_DATE" javaType="java.lang.String"/>
		<result property="regDate" column="REG_DATE" javaType="java.lang.String"/>
		<result property="lastDate" column="LAST_DATE" javaType="java.lang.String"/>
		<result property="modifyUserId" column="MODIFY_USER_ID" javaType="java.lang.String"/>
	</resultMap>
	
	<select id="selectListBomCategoryTb0001" resultType="com.blueone.category.domain.CategoryInfo" resultMap="CategoryInfoMap">
		SELECT
			IDX, CTG_P_CODE, CTG_CODE_TYPE, CTG_CODE, CTG_NAME, CTG_DESC
			, FROM_DATE, TO_DATE, REG_DATE, LAST_DATE, MODIFY_USER_ID
		FROM
			BOM_CATEGORY_TB
		ORDER BY
			CTG_CODE_TYPE ASC, CTG_P_CODE ASC
	</select >
	
	<select id="selectDtlBomCategoryTb0001" parameterType="hashmap" resultType="com.blueone.category.domain.CategoryInfo" resultMap="CategoryInfoMap">
		SELECT  `IDX`,`CTG_P_CODE`,`CTG_CODE_TYPE`,`CTG_CODE`,`CTG_NAME`
				,`CTG_DESC`,`FROM_DATE`,`TO_DATE`,`REG_DATE`,`LAST_DATE`
		FROM BOM_CATEGORY_TB
		WHERE
			CTG_CODE = #{ctgCode}
	</select >

	<insert id="insertBomCategoryTb0001" parameterType="com.blueone.category.domain.CategoryInfo">
		INSERT BOM_CATEGORY_TB
			(`CTG_P_CODE`,`CTG_CODE_TYPE`,`CTG_CODE`,`CTG_NAME`
				,`CTG_DESC`,`FROM_DATE`,`TO_DATE`,`REG_DATE`,`LAST_DATE`, `MODIFY_USER_ID`)
			VALUES
			(#{ctgPCode}, #{ctgCodeType}, #{ctgCode}, #{ctgName}, #{ctgDesc}
			  , #{fromDate}, #{toDate}, sysdate(), sysdate(), #{modifyUserId})
	</insert>
	
	<update id="updateBomCategoryTb0001" parameterType="com.blueone.category.domain.CategoryInfo">
		UPDATE BOM_CATEGORY_TB
			SET
				`LAST_DATE` = sysdate()
				<if test="ctgPCode != null and fromDate != ''">,`CTG_P_CODE` = #{ctgPCode}</if>
				<if test="ctgCodeType != null and ctgCodeType != ''">,`CTG_CODE_TYPE` = #{ctgCodeType}</if>
				<if test="ctgName != null and ctgName != ''">,`CTG_NAME` = #{ctgName}, `CTG_DESC` = #{ctgDesc}</if>
				<if test="ctgOrder != null and ctgOrder != ''">,`CTG_ORDER` = #{ctgOrder}</if>
				<if test="fromDate != null and fromDate != ''">,`FROM_DATE` = #{fromDate}</if>
				<if test="toDate != null and toDate != ''">,`TO_DATE` = #{toDate}</if>
		WHERE
			`CTG_CODE`= #{ctgCode}
	</update>


</mapper>
